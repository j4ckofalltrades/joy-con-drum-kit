function e(e,t){let a=(t=t||{}).beta||.4,i=!0!==t.doInitialisation,n=1,r=0,s=0,c=0,l=1/(1e3/e);function o(e,t,a,i,n,r){return{x:t*r-a*n,y:a*i-e*r,z:e*n-t*i}}function d(e,t,a,l,d,u){let h=function(e,t,a,i,n,r){let s=-Math.atan2(e,Math.sqrt(t*t+a*a)),c=o(e,t,a,1,0,0),l=o(1,0,0,c.x,c.y,c.z),d=Math.atan2(l.y,l.z),u=Math.cos(d),h=Math.sin(s),p=Math.sin(d);return{heading:-Math.atan2(n*u-r*p,i*Math.cos(s)+n*p*h+r*u*h),pitch:s,roll:d}}(e,t,a,l,d,u),p=function(e){let t=Math.cos(.5*e.heading),a=Math.sin(.5*e.heading),i=Math.cos(.5*e.pitch),n=Math.sin(.5*e.pitch),r=Math.cos(.5*e.roll),s=Math.sin(.5*e.roll);return{w:r*i*t+s*n*a,x:s*i*t-r*n*a,y:r*n*t+s*i*a,z:r*i*a-s*n*t}}(h),w=(p.w*p.w+p.x*p.x+p.y*p.y+p.z*p.z)**-.5;n=p.w*w,r=p.x*w,s=p.y*w,c=p.z*w,i=!0}return{update:function(e,t,o,u,h,p,w,y,m,v){let x,f,b,_,g,M,I,S,E,z,R,L,F,k,D,U,A,C,P,V,q,B,$,j,O,H,J,N,Q,T,G,K,W,X,Y;if(l=v||l,i||d(u,h,p,w,y,m),void 0===w||void 0===y||void 0===m||0===w&&0===y&&0===m){var Z,ee,et;let i,d,w,y,m,v,x,f,b,_,g,M,I,S,E,z,R,L,F,k,D,U;Z=u,ee=h,et=p,v=.5*(-r*e-s*t-c*o),x=.5*(n*e+s*o-c*t),f=.5*(n*t-r*o+c*e),b=.5*(n*o+r*t-s*e),0===Z&&0===ee&&0===et||(i=(Z*Z+ee*ee+et*et)**-.5,Z*=i,ee*=i,et*=i,_=2*n,g=2*r,M=2*s,I=2*c,S=4*n,E=4*r,z=4*s,R=8*r,L=8*s,F=n*n,k=r*r,D=s*s,U=c*c,i=((d=S*D+M*Z+S*k-g*ee)*d+(w=E*U-I*Z+4*F*r-_*ee-E+R*k+R*D+E*et)*w+(y=4*F*s+_*Z+z*U-I*ee-z+L*k+L*D+z*et)*y+(m=4*k*c-g*Z+4*D*c-M*ee)*m)**-.5,d*=i,w*=i,y*=i,m*=i,v-=a*d,x-=a*w,f-=a*y,b-=a*m),n+=v*l,r+=x*l,s+=f*l,c+=b*l,i=(n*n+r*r+s*s+c*c)**-.5,n*=i,r*=i,s*=i,c*=i;return}M=.5*(-r*e-s*t-c*o),I=.5*(n*e+s*o-c*t),S=.5*(n*t-r*o+c*e),E=.5*(n*o+r*t-s*e),0===u&&0===h&&0===p||(x=(u*u+h*h+p*p)**-.5,u*=x,h*=x,p*=x,x=(w*w+y*y+m*m)**-.5,w*=x,y*=x,m*=x,L=2*n*w,F=2*n*y,k=2*n*m,D=2*r*w,V=2*n,q=2*r,B=2*s,$=2*c,j=2*n*s,O=2*s*c,H=n*n,J=n*r,N=n*s,Q=n*c,T=r*r,G=r*s,K=r*c,W=s*s,X=s*c,Y=c*c,U=Math.sqrt((z=w*H-F*c+k*s+w*T+q*y*s+q*m*c-w*W-w*Y)*z+(R=L*c+y*H-k*r+D*s-y*T+y*W+B*m*c-y*Y)*R),A=-L*s+F*r+m*H+D*c-m*T+B*y*c-m*W+m*Y,C=2*U,P=2*A,x=((f=-B*(2*K-j-u)+q*(2*J+O-h)-A*s*(U*(.5-W-Y)+A*(K-N)-w)+(-U*c+A*r)*(U*(G-Q)+A*(J+X)-y)+U*s*(U*(N+K)+A*(.5-T-W)-m))*f+(b=$*(2*K-j-u)+V*(2*J+O-h)-4*r*(1-2*T-2*W-p)+A*c*(U*(.5-W-Y)+A*(K-N)-w)+(U*s+A*n)*(U*(G-Q)+A*(J+X)-y)+(U*c-P*r)*(U*(N+K)+A*(.5-T-W)-m))*b+(_=-V*(2*K-j-u)+$*(2*J+O-h)-4*s*(1-2*T-2*W-p)+(-C*s-A*n)*(U*(.5-W-Y)+A*(K-N)-w)+(U*r+A*c)*(U*(G-Q)+A*(J+X)-y)+(U*n-P*s)*(U*(N+K)+A*(.5-T-W)-m))*_+(g=q*(2*K-j-u)+B*(2*J+O-h)+(-C*c+A*r)*(U*(.5-W-Y)+A*(K-N)-w)+(-U*n+A*s)*(U*(G-Q)+A*(J+X)-y)+U*r*(U*(N+K)+A*(.5-T-W)-m))*g)**-.5,f*=x,b*=x,_*=x,g*=x,M-=a*f,I-=a*b,S-=a*_,E-=a*g),n+=M*l,r+=I*l,s+=S*l,c+=E*l,x=(n*n+r*r+s*s+c*c)**-.5,n*=x,r*=x,s*=x,c*=x},init:d,getQuaternion:()=>({w:n,x:r,y:s,z:c})}}const t=new e(10),a=new e(10),i=180/Math.PI;function n(e){return function(e,t){let a=null==e?0:e.length;return a?function(e,t){let a;for(let i of e){let e=t(i);void 0!==e&&(a=void 0===a?e:a+e)}return a}(e,t)/a:NaN}(e,e=>e)}const r={1:"Left Joy-Con",2:"Right Joy-Con",3:"Pro Controller"},s=Math.PI/2;function c(e){let t=new DataView(e.buffer);return parseFloat((244e-6*t.getInt16(0,!0)).toFixed(6))}function l(e){let t=new DataView(e.buffer);return parseFloat((.06103*t.getInt16(0,!0)).toFixed(6))}function o(e){let t=new DataView(e.buffer);return parseFloat((1694e-7*t.getInt16(0,!0)).toFixed(6))}function d(e){let t=.005*e.length,a=[n(e.map(e=>e[0])),n(e.map(e=>e[1])),n(e.map(e=>e[2]))].map(e=>parseFloat((e*t).toFixed(6)));return{x:a[0],y:a[1],z:a[2]}}const u=async e=>{let t=({subcommand:e,expectedReport:t,timeoutErrorMessage:a="timeout."})=>i=>new Promise(async(n,r)=>{let s=setTimeout(()=>{i.removeEventListener("inputreport",c),r(Error(a))},5e3),c=e=>{if(33!==e.reportId)return;let a=new Uint8Array(e.data.buffer);for(let[e,i]of Object.entries(t))if(a[e-1]!==i)return;i.removeEventListener("inputreport",c),clearTimeout(s),setTimeout(n,50)};i.addEventListener("inputreport",c),await i.sendReport(1,new Uint8Array([0,0,0,0,0,0,0,0,0,...e]))});t({subcommand:[3,48],expectedReport:{14:3}});let a=t({subcommand:[34,1],expectedReport:{13:128,14:34}}),i=t({subcommand:[33,33,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,243],expectedReport:{14:33}}),n=t({subcommand:[89],expectedReport:{14:89,16:32},timeoutErrorMessage:"ring-con not found."}),r=t({subcommand:[92,6,3,37,6,0,0,0,0,28,22,237,52,54,0,0,0,10,100,11,230,169,34,0,0,4,0,0,0,0,0,0,0,144,168,225,52,54],expectedReport:{14:92}}),s=t({subcommand:[90,4,1,1,2],expectedReport:{14:90}});await a(e),await i(e),await n(e),await r(e),await s(e)},h=(e,t)=>{let a=new e.constructor(e.length+t.length);return a.set(e,0),a.set(t,e.length),a};class p extends EventTarget{constructor(e){super(),this.device=e,this.lastValues={timestamp:null,alpha:0,beta:0,gamma:0}}async open(){this.device.opened||await this.device.open(),this.device.addEventListener("inputreport",this._onInputReport.bind(this))}async getRequestDeviceInfo(){let e=new Promise(e=>{let t=({detail:a})=>{this.removeEventListener("deviceinfo",t),delete a._raw,delete a._hex,e(a)};this.addEventListener("deviceinfo",t)});return await this.device.sendReport(1,new Uint8Array([0,0,0,0,0,0,0,0,0,2])),e}async getBatteryLevel(){let e=new Promise(e=>{let t=({detail:a})=>{this.removeEventListener("batterylevel",t),delete a._raw,delete a._hex,e(a)};this.addEventListener("batterylevel",t)});return await this.device.sendReport(1,new Uint8Array([0,0,0,0,0,0,0,0,0,80])),e}async enableSimpleHIDMode(){await this.device.sendReport(1,new Uint8Array([0,0,0,0,0,0,0,0,0,3,63]))}async enableStandardFullMode(){await this.device.sendReport(1,new Uint8Array([0,0,0,0,0,0,0,0,0,3,48]))}async enableIMUMode(){await this.device.sendReport(1,new Uint8Array([0,0,0,0,0,0,0,0,0,64,1]))}async disableIMUMode(){await this.device.sendReport(1,new Uint8Array([0,0,0,0,0,0,0,0,0,64,0]))}async enableVibration(){await this.device.sendReport(1,new Uint8Array([0,0,1,64,64,0,1,64,64,72,1]))}async disableVibration(){await this.device.sendReport(1,new Uint8Array([0,0,1,64,64,0,1,64,64,72,0]))}async enableRingCon(){await u(this.device)}async enableUSBHIDJoystickReport(){let e=null!=this.device.collections[0].outputReports.find(e=>128==e.reportId);e&&(await this.device.sendReport(128,new Uint8Array([1])),await this.device.sendReport(128,new Uint8Array([2])),await this.device.sendReport(1,new Uint8Array([3])),await this.device.sendReport(128,new Uint8Array([4])))}async rumble(e,t,a){let i;let n=(e,t,a)=>Math.min(Math.max(e,t),a),r=new Uint8Array(9);r[0]=0;let s=n(e,40.875885,626.286133),c=n(t,81.75177,1252.572266);c=(Math.round(32*Math.log2(.1*c))-96)*4,s=Math.round(32*Math.log2(.1*s))-64;let l=n(a,0,1),o=.5*Math.round(i=0==l?0:l<.117?(32*Math.log2(1e3*l)-96)/(5-Math.pow(l,2))-1:l<.23?32*Math.log2(1e3*l)-96-92:(32*Math.log2(1e3*l)-96)*2-246),d=o%2;d>0&&--o,o>>=1,o+=64,d>0&&(o|=32768),r[1]=255&c,r[2]=i+(c>>>8&255),r[3]=s+(o>>>8&255),r[4]+=255&o;for(let e=0;e<4;e++)r[5+e]=r[1+e];await this.device.sendReport(16,new Uint8Array(r))}async setLEDState(e){let t=[48,e];await this.device.sendReport(1,new Uint8Array([0,0,0,0,0,0,0,0,0,...t]))}async setLED(e){this.ledstate|=1<<e,await this.setLEDState(this.ledstate)}async resetLED(e){this.ledstate&=~(1<<e|1<<4+e),await this.setLEDState(this.ledstate)}async blinkLED(e){this.ledstate&=~(1<<e),this.ledstate|=1<<4+e,await this.setLEDState(this.ledstate)}_onInputReport(e){let{data:u,reportId:p,device:w}=e;if(!u)return;u=h(new Uint8Array([p]),new Uint8Array(u.buffer));let y=u.map(e=>e.toString(16)),m={inputReportID:function(e,t){let a={_raw:e.slice(0,1),_hex:t.slice(0,1)};return a}(u,y)};switch(p){case 63:m={...m,buttonStatus:function(e,t){let a={_raw:e.slice(1,3),_hex:t.slice(1,3)};return a}(u,y),analogStick:function(e,t){let a={_raw:e.slice(3,4),_hex:t.slice(3,4)};return a}(u,y),filter:function(e,t){let a={_raw:e.slice(4),_hex:t.slice(4)};return a}(u,y)};break;case 33:case 48:if(m={...m,timer:function(e,t){let a={_raw:e.slice(1,2),_hex:t.slice(1,2)};return a}(u,y),batteryLevel:function(e,t){let a={_raw:e.slice(2,3),_hex:t.slice(2,3),level:function(e){let t;switch(e[0]){case 8:t="full";break;case 4:t="medium";break;case 2:t="low";break;case 1:t="critical";break;case 0:t="empty";break;default:t="charging"}return t}(t.slice(2,3))};return a}(u,y),connectionInfo:function(e,t){let a={_raw:e.slice(2,3),_hex:t.slice(2,3)};return a}(u,y),buttonStatus:function(e,t){let a={_raw:e.slice(3,6),_hex:t.slice(3,6),y:!!(1&e[3]),x:!!(2&e[3]),b:!!(4&e[3]),a:!!(8&e[3]),r:!!(64&e[3]),zr:!!(128&e[3]),down:!!(1&e[5]),up:!!(2&e[5]),right:!!(4&e[5]),left:!!(8&e[5]),l:!!(64&e[5]),zl:!!(128&e[5]),sr:!!(16&e[3])||!!(16&e[5]),sl:!!(32&e[3])||!!(32&e[5]),minus:!!(1&e[4]),plus:!!(2&e[4]),rightStick:!!(4&e[4]),leftStick:!!(8&e[4]),home:!!(16&e[4]),capture:!!(32&e[4]),chargingGrip:!!(128&e[4])};return a}(u,y),analogStickLeft:function(e,t){let a=e[6]|(15&e[7])<<8;a=((a/1995-1)*2).toFixed(1);let i=-((e[7]>>4|e[8]<<4)*1);i=((i/2220+1)*2).toFixed(1);let n={_raw:e.slice(6,9),_hex:t.slice(6,9),horizontal:a,vertical:i};return n}(u,y),analogStickRight:function(e,t){let a=e[9]|(15&e[10])<<8;a=((a/1995-1)*2).toFixed(1);let i=-((e[10]>>4|e[11]<<4)*1);i=((i/2220+1)*2).toFixed(1);let n={_raw:e.slice(9,12),_hex:t.slice(9,12),horizontal:a,vertical:i};return n}(u,y),vibrator:function(e,t){let a={_raw:e.slice(12,13),_hex:t.slice(12,13)};return a}(u,y)},33===p&&(m={...m,ack:function(e,t){let a={_raw:e.slice(13,14),_hex:t.slice(13,14)};return a}(u,y),subcommandID:function(e,t){let a={_raw:e.slice(14,15),_hex:t.slice(14,15)};return a}(u,y),subcommandReplyData:function(e,t){let a={_raw:e.slice(15),_hex:t.slice(15)};return a}(u,y),deviceInfo:function(e,t){let a=e.slice(15,26),i=a.slice(0,1)[0],n=a.slice(1,2)[0],s=a.slice(2,3),c=a.slice(4,10),l=[];c.forEach(e=>{l.push(e.toString(16))});let o=a.slice(11,12),d={_raw:a.slice(0,12),_hex:a.slice(0,12),firmwareVersion:{major:i,minor:n},type:r[s[0]],macAddress:l.join(":"),spiColorInUse:1===o[0]};return d}(u,0)}),48===p){let e=function(e,t){let a=[{x:{_raw:e.slice(13,15),_hex:t.slice(13,15),acc:c(e.slice(13,15))},y:{_raw:e.slice(15,17),_hex:t.slice(15,17),acc:c(e.slice(15,17))},z:{_raw:e.slice(17,19),_hex:t.slice(17,19),acc:c(e.slice(17,19))}},{x:{_raw:e.slice(25,27),_hex:t.slice(25,27),acc:c(e.slice(25,27))},y:{_raw:e.slice(27,29),_hex:t.slice(27,29),acc:c(e.slice(27,29))},z:{_raw:e.slice(29,31),_hex:t.slice(29,31),acc:c(e.slice(29,31))}},{x:{_raw:e.slice(37,39),_hex:t.slice(37,39),acc:c(e.slice(37,39))},y:{_raw:e.slice(39,41),_hex:t.slice(39,41),acc:c(e.slice(39,41))},z:{_raw:e.slice(41,43),_hex:t.slice(41,43),acc:c(e.slice(41,43))}}];return a}(u,y),r=function(e,t){let a=[[{_raw:e.slice(19,21),_hex:t.slice(19,21),dps:l(e.slice(19,21)),rps:o(e.slice(19,21))},{_raw:e.slice(21,23),_hex:t.slice(21,23),dps:l(e.slice(21,23)),rps:o(e.slice(21,23))},{_raw:e.slice(23,25),_hex:t.slice(23,25),dps:l(e.slice(23,25)),rps:o(e.slice(23,25))}],[{_raw:e.slice(31,33),_hex:t.slice(31,33),dps:l(e.slice(31,33)),rps:o(e.slice(31,33))},{_raw:e.slice(33,35),_hex:t.slice(33,35),dps:l(e.slice(33,35)),rps:o(e.slice(33,35))},{_raw:e.slice(35,37),_hex:t.slice(35,37),dps:l(e.slice(35,37)),rps:o(e.slice(35,37))}],[{_raw:e.slice(43,45),_hex:t.slice(43,45),dps:l(e.slice(43,45)),rps:o(e.slice(43,45))},{_raw:e.slice(45,47),_hex:t.slice(45,47),dps:l(e.slice(45,47)),rps:o(e.slice(45,47))},{_raw:e.slice(47,49),_hex:t.slice(47,49),dps:l(e.slice(47,49)),rps:o(e.slice(47,49))}]];return a}(u,y),h=d(r.map(e=>e.map(e=>e.rps))),p=d(r.map(e=>e.map(e=>e.dps))),v=function(e){let t=.005*e.length,a={x:parseFloat((n(e.map(e=>e[0]))*t).toFixed(6)),y:parseFloat((n(e.map(e=>e[1]))*t).toFixed(6)),z:parseFloat((n(e.map(e=>e[2]))*t).toFixed(6))};return a}(e.map(e=>[e.x.acc,e.y.acc,e.z.acc])),x=8198===w.productId?(t.update(h.x,h.y,h.z,v.x,v.y,v.z),t.getQuaternion()):(a.update(h.x,h.y,h.z,v.x,v.y,v.z),a.getQuaternion());m={...m,accelerometers:e,gyroscopes:r,actualAccelerometer:v,actualGyroscope:{dps:p,rps:h},actualOrientation:function(e,t,a,i){let n=Date.now(),r=e.timestamp?(n-e.timestamp)/1e3:0;e.timestamp=n;let c=Math.sqrt(a.x**2+a.y**2+a.z**2);return e.alpha=.9875*(e.alpha+t.z*r),0!==c&&(e.beta=.75*(e.beta+t.x*r)+.25*(a.x*s/c),e.gamma=.75*(e.gamma+t.y*r)+.25*(-(a.y*s)/c)),{alpha:8198===i?(-1*(180*e.alpha)/Math.PI*430%90).toFixed(6):(180*e.alpha/Math.PI*430%360).toFixed(6),beta:(-1*(180*e.beta)/Math.PI).toFixed(6),gamma:8198===i?(-1*(180*e.gamma)/Math.PI).toFixed(6):(180*e.gamma/Math.PI).toFixed(6)}}(this.lastValues,h,v,w.productId),actualOrientationQuaternion:function(e){let t=e.w*e.w,a=e.x*e.x,n=e.y*e.y,r=e.z*e.z;return{alpha:(i*Math.atan2(2*(e.x*e.y+e.z*e.w),a-n-r+t)).toFixed(6),beta:(-(i*Math.asin(2*(e.x*e.z-e.y*e.w)))).toFixed(6),gamma:(i*Math.atan2(2*(e.y*e.z+e.x*e.w),-a-n+r+t)).toFixed(6)}}(x),quaternion:x,ringCon:function(e,t){let a={_raw:e.slice(38,2),_hex:t.slice(38,2),strain:new DataView(e.buffer,39,2).getInt16(0,!0)};return a}(u,y)}}}m.deviceInfo?.type&&this._receiveDeviceInfo(m.deviceInfo),m.batteryLevel?.level&&this._receiveBatteryLevel(m.batteryLevel),this._receiveInputEvent(m)}_receiveDeviceInfo(e){this.dispatchEvent(new CustomEvent("deviceinfo",{detail:e}))}_receiveBatteryLevel(e){this.dispatchEvent(new CustomEvent("batterylevel",{detail:e}))}}class w extends p{constructor(e){super(e)}_receiveInputEvent(e){delete e.buttonStatus.x,delete e.buttonStatus.y,delete e.buttonStatus.b,delete e.buttonStatus.a,delete e.buttonStatus.plus,delete e.buttonStatus.r,delete e.buttonStatus.zr,delete e.buttonStatus.home,delete e.buttonStatus.rightStick,this.dispatchEvent(new CustomEvent("hidinput",{detail:e}))}}class y extends p{constructor(e){super(e)}_receiveInputEvent(e){delete e.buttonStatus.up,delete e.buttonStatus.down,delete e.buttonStatus.left,delete e.buttonStatus.right,delete e.buttonStatus.minus,delete e.buttonStatus.l,delete e.buttonStatus.zl,delete e.buttonStatus.capture,delete e.buttonStatus.leftStick,this.dispatchEvent(new CustomEvent("hidinput",{detail:e}))}}class m extends p{constructor(e){super(e)}_receiveInputEvent(e){this.dispatchEvent(new CustomEvent("hidinput",{detail:e}))}}const v=new Map,x=[],f=e=>{let t=x.indexOf(e);return t>=0?t:(x.push(e),x.length-1)},b=async e=>{let t=f(e);console.log(`HID connected: ${t} ${e.productId.toString(16)} ${e.productName}`),v.set(t,await M(e))},_=async e=>{let t=f(e);console.log(`HID disconnected: ${t} ${e.productId.toString(16)} ${e.productName}`),v.delete(t)};navigator.hid.addEventListener("connect",async({device:e})=>{b(e)}),navigator.hid.addEventListener("disconnect",({device:e})=>{_(e)}),document.addEventListener("DOMContentLoaded",async()=>{let e=await navigator.hid.getDevices();e.forEach(async e=>{await b(e)})});const g=async()=>{try{let[e]=await navigator.hid.requestDevice({filters:[{vendorId:1406}]});if(!e)return;await b(e)}catch(e){console.error(e.name,e.message)}},M=async e=>{let t=null;return 8198===e.productId?t=new w(e):8199===e.productId&&"Joy-Con (R)"===e.productName&&(t=new y(e)),t||(t=new m(e)),await t.open(),await t.enableUSBHIDJoystickReport(),await t.enableStandardFullMode(),await t.enableIMUMode(),t},I=document.querySelector("#connect-joy-cons");I.addEventListener("click",g);const S=(e,t)=>document.querySelector(e).classList.toggle("highlight",t),E=e=>{if(!e)return;let t=document.querySelector(`audio[data-key="${e}"]`);t.play()},z=(e,t)=>{if(!t||!t.actualOrientation)return;let{buttonStatus:a}=t;e instanceof w&&(S("#up",a.up),S("#down",a.down),S("#left",a.left),S("#right",a.right),S("#capture",a.capture),S("#l",a.l||a.zl),S("#minus",a.minus),S("#joystick-left",a.leftStick),a.up&&E("crash"),a.down&&E("snare"),a.left&&E("hi-hat"),a.right&&E("hi-hat-open"),a.l&&E("clap"),a.zl&&E("bass")),e instanceof y&&(S("#a",a.a),S("#b",a.b),S("#x",a.x),S("#y",a.y),S("#home",a.home),S("#r",a.r||a.zr),S("#plus",a.plus),S("#joystick-right",a.rightStick),a.a&&E("tom-l"),a.b&&E("tom-f"),a.x&&E("ride"),a.y&&E("tom-s"),a.r&&E("tink"),a.zr&&E("bass"))};// Joy-Cons may sleep until touched, so attach the listener dynamically.
setInterval(async()=>{for(let e of v.values())e.eventListenerAttached||(e.eventListenerAttached=!0,await e.enableVibration(),e.addEventListener("hidinput",t=>{z(e,t.detail)}))},2e3);// Controls modal
const R=document.getElementById("controls"),L=document.getElementById("btn-controls");L.onclick=()=>R.style.display="block",window.onclick=e=>{e.target===R&&(R.style.display="none")};